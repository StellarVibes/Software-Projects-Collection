<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
html {
  font-family: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
.markmap-dark {
  background: #27272a;
  color: white;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.12/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:S,mm:Q}=window,$=new S.Toolbar;$.attach(Q);const I=$.render();I.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(I)})})()</script><script>((l,U,M,R)=>{const N=l();window.mm=N.Markmap.create("svg#mindmap",(U||N.deriveOptions)(R),M),window.matchMedia("(prefers-color-scheme: dark)").matches&&document.documentElement.classList.add("markmap-dark")})(()=>window.markmap,null,{"content":"ConcurrentMemoryPool &#x6a21;&#x5757;&#x4ecb;&#x7ecd;&#x548c;&#x4f7f;&#x7528;&#x6587;&#x6863;","children":[{"content":"&#x9879;&#x76ee;&#x6982;&#x8ff0;","children":[],"payload":{"tag":"h2","lines":"2,3"}},{"content":"&#x6a21;&#x5757;&#x5217;&#x8868;","children":[{"content":"1. <a href=\"#1-commonh\">Common.h - &#x901a;&#x7528;&#x5b9a;&#x4e49;&#x548c;&#x57fa;&#x7840;&#x5de5;&#x5177;&#x7c7b;</a>","children":[],"payload":{"tag":"li","lines":"8,9","listIndex":1}},{"content":"2. <a href=\"#2-threadcache\">ThreadCache - &#x7ebf;&#x7a0b;&#x7f13;&#x5b58;</a>","children":[],"payload":{"tag":"li","lines":"9,10","listIndex":2}},{"content":"3. <a href=\"#3-centralcache\">CentralCache - &#x4e2d;&#x5fc3;&#x7f13;&#x5b58;</a>","children":[],"payload":{"tag":"li","lines":"10,11","listIndex":3}},{"content":"4. <a href=\"#4-pagecache\">PageCache - &#x9875;&#x7f13;&#x5b58;</a>","children":[],"payload":{"tag":"li","lines":"11,12","listIndex":4}},{"content":"5. <a href=\"#5-pagemap\">PageMap - &#x9875;&#x6620;&#x5c04;&#xff08;&#x57fa;&#x6570;&#x6811;&#xff09;</a>","children":[],"payload":{"tag":"li","lines":"12,13","listIndex":5}},{"content":"6. <a href=\"#6-objectpool\">ObjectPool - &#x5bf9;&#x8c61;&#x6c60;</a>","children":[],"payload":{"tag":"li","lines":"13,14","listIndex":6}},{"content":"7. <a href=\"#7-concurrentalloc\">ConcurrentAlloc - &#x5e76;&#x53d1;&#x5206;&#x914d;&#x63a5;&#x53e3;</a>","children":[],"payload":{"tag":"li","lines":"14,16","listIndex":7}}],"payload":{"tag":"h2","lines":"6,7"}},{"content":"1. Common.h","children":[{"content":"&#x6a21;&#x5757;&#x7b80;&#x4ecb;","children":[],"payload":{"tag":"h3","lines":"20,21"}},{"content":"&#x4e3b;&#x8981;&#x7ec4;&#x4ef6;","children":[{"content":"&#x5168;&#x5c40;&#x5e38;&#x91cf;","children":[{"content":"<pre data-lines=\"28,34\"><code class=\"language-cpp\"><span class=\"hljs-type\">static</span> <span class=\"hljs-type\">const</span> <span class=\"hljs-type\">size_t</span> MAX_BYTES = <span class=\"hljs-number\">256</span> * <span class=\"hljs-number\">1024</span>;      <span class=\"hljs-comment\">// ThreadCache &#x6700;&#x5927;&#x5206;&#x914d; 256KB</span>\n<span class=\"hljs-type\">static</span> <span class=\"hljs-type\">const</span> <span class=\"hljs-type\">size_t</span> NFREELISTS = <span class=\"hljs-number\">208</span>;            <span class=\"hljs-comment\">// ThreadCache &#x548c; CentralCache &#x7684;&#x54c8;&#x5e0c;&#x6876;&#x6570;&#x91cf;</span>\n<span class=\"hljs-type\">static</span> <span class=\"hljs-type\">const</span> <span class=\"hljs-type\">size_t</span> NPAGES = <span class=\"hljs-number\">129</span>;                <span class=\"hljs-comment\">// PageCache &#x7684;&#x54c8;&#x5e0c;&#x6876;&#x6570;&#x91cf;</span>\n<span class=\"hljs-type\">static</span> <span class=\"hljs-type\">const</span> <span class=\"hljs-type\">size_t</span> PAGE_SHIFT = <span class=\"hljs-number\">13</span>;             <span class=\"hljs-comment\">// &#x9875;&#x5927;&#x5c0f;&#x504f;&#x79fb;&#xff08;&#x4e00;&#x9875;&#x5927;&#x5c0f;&#x4e3a; 2^13 = 8KB&#xff09;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"28,34"}}],"payload":{"tag":"h4","lines":"26,27"}},{"content":"FreeList - &#x81ea;&#x7531;&#x94fe;&#x8868;&#x7c7b;","children":[{"content":"<code>void Push(void* obj)</code> - &#x5c06;&#x5bf9;&#x8c61;&#x63d2;&#x5165;&#x94fe;&#x8868;&#x5934;&#x90e8;","children":[],"payload":{"tag":"li","lines":"41,42"}},{"content":"<code>void* Pop()</code> - &#x4ece;&#x94fe;&#x8868;&#x5934;&#x90e8;&#x53d6;&#x51fa;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;","children":[],"payload":{"tag":"li","lines":"42,43"}},{"content":"<code>void PushRange(void* start, void* end, size_t n)</code> - &#x6279;&#x91cf;&#x63d2;&#x5165;&#x5bf9;&#x8c61;","children":[],"payload":{"tag":"li","lines":"43,44"}},{"content":"<code>void PopRange(void*&amp; start, void*&amp; end, size_t n)</code> - &#x6279;&#x91cf;&#x53d6;&#x51fa;&#x5bf9;&#x8c61;","children":[],"payload":{"tag":"li","lines":"44,45"}},{"content":"<code>bool Empty()</code> - &#x5224;&#x65ad;&#x94fe;&#x8868;&#x662f;&#x5426;&#x4e3a;&#x7a7a;","children":[],"payload":{"tag":"li","lines":"45,46"}},{"content":"<code>size_t Size()</code> - &#x83b7;&#x53d6;&#x94fe;&#x8868;&#x4e2d;&#x7684;&#x5bf9;&#x8c61;&#x6570;&#x91cf;","children":[],"payload":{"tag":"li","lines":"46,47"}},{"content":"<code>size_t&amp; MaxSize()</code> - &#x83b7;&#x53d6;/&#x8bbe;&#x7f6e;&#x6700;&#x5927;&#x5bb9;&#x91cf;","children":[],"payload":{"tag":"li","lines":"47,49"}}],"payload":{"tag":"h4","lines":"35,36"}},{"content":"SizeClass - &#x5927;&#x5c0f;&#x6620;&#x5c04;&#x7c7b;","children":[{"content":"<table data-lines=\"62,69\">\n<thead data-lines=\"62,63\">\n<tr data-lines=\"62,63\">\n<th>&#x5b57;&#x8282;&#x8303;&#x56f4;</th>\n<th>&#x5bf9;&#x9f50;&#x5927;&#x5c0f;</th>\n<th>&#x54c8;&#x5e0c;&#x6876;&#x7d22;&#x5f15;&#x8303;&#x56f4;</th>\n</tr>\n</thead>\n<tbody data-lines=\"64,69\">\n<tr data-lines=\"64,65\">\n<td>[1, 128]</td>\n<td>8 bytes</td>\n<td>[0, 16)</td>\n</tr>\n<tr data-lines=\"65,66\">\n<td>[129, 1024]</td>\n<td>16 bytes</td>\n<td>[16, 72)</td>\n</tr>\n<tr data-lines=\"66,67\">\n<td>[1025, 8192]</td>\n<td>128 bytes</td>\n<td>[72, 128)</td>\n</tr>\n<tr data-lines=\"67,68\">\n<td>[8193, 65536]</td>\n<td>1024 bytes</td>\n<td>[128, 184)</td>\n</tr>\n<tr data-lines=\"68,69\">\n<td>[65537, 262144]</td>\n<td>8192 bytes</td>\n<td>[184, 208)</td>\n</tr>\n</tbody>\n</table>","children":[],"payload":{"tag":"table","lines":"62,69"}}],"payload":{"tag":"h4","lines":"49,50"}},{"content":"Span - &#x8de8;&#x9875;&#x5185;&#x5b58;&#x5757;&#x7ed3;&#x6784;","children":[{"content":"<pre data-lines=\"76,86\"><code class=\"language-cpp\">PAGE_ID _pageId;      <span class=\"hljs-comment\">// &#x8d77;&#x59cb;&#x9875;&#x53f7;</span>\n<span class=\"hljs-type\">size_t</span> _n;            <span class=\"hljs-comment\">// &#x9875;&#x6570;&#x91cf;</span>\nSpan* _next;          <span class=\"hljs-comment\">// &#x53cc;&#x5411;&#x94fe;&#x8868;&#x6307;&#x9488;</span>\nSpan* _prev;\n<span class=\"hljs-type\">size_t</span> _objSize;      <span class=\"hljs-comment\">// &#x5207;&#x5272;&#x6210;&#x7684;&#x5c0f;&#x5bf9;&#x8c61;&#x5927;&#x5c0f;</span>\n<span class=\"hljs-type\">size_t</span> _useCount;     <span class=\"hljs-comment\">// &#x5206;&#x914d;&#x7ed9; ThreadCache &#x7684;&#x8ba1;&#x6570;</span>\n<span class=\"hljs-type\">void</span>* _freeList;      <span class=\"hljs-comment\">// &#x5207;&#x5272;&#x6210;&#x7684;&#x5c0f;&#x5bf9;&#x8c61;&#x81ea;&#x7531;&#x94fe;&#x8868;</span>\n<span class=\"hljs-type\">bool</span> _isUse;          <span class=\"hljs-comment\">// &#x662f;&#x5426;&#x6b63;&#x5728;&#x4f7f;&#x7528;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"76,86"}}],"payload":{"tag":"h4","lines":"70,71"}},{"content":"SpanList - &#x8de8;&#x9875;&#x94fe;&#x8868;&#x7c7b;","children":[{"content":"<code>Span* Begin()</code> - &#x83b7;&#x53d6;&#x7b2c;&#x4e00;&#x4e2a;&#x8282;&#x70b9;","children":[],"payload":{"tag":"li","lines":"93,94"}},{"content":"<code>Span* End()</code> - &#x83b7;&#x53d6;&#x5934;&#x7ed3;&#x70b9;","children":[],"payload":{"tag":"li","lines":"94,95"}},{"content":"<code>bool Empty()</code> - &#x5224;&#x65ad;&#x94fe;&#x8868;&#x662f;&#x5426;&#x4e3a;&#x7a7a;","children":[],"payload":{"tag":"li","lines":"95,96"}},{"content":"<code>void PushFront(Span* span)</code> - &#x5934;&#x63d2;","children":[],"payload":{"tag":"li","lines":"96,97"}},{"content":"<code>Span* PopFront()</code> - &#x5934;&#x5220;","children":[],"payload":{"tag":"li","lines":"97,98"}},{"content":"<code>void Insert(Span* pos, Span* newSpan)</code> - &#x5728;&#x6307;&#x5b9a;&#x4f4d;&#x7f6e;&#x63d2;&#x5165;","children":[],"payload":{"tag":"li","lines":"98,99"}},{"content":"<code>void Erase(Span* pos)</code> - &#x5220;&#x9664;&#x6307;&#x5b9a;&#x8282;&#x70b9;","children":[],"payload":{"tag":"li","lines":"99,101"}}],"payload":{"tag":"h4","lines":"87,88"}}],"payload":{"tag":"h3","lines":"24,25"}},{"content":"&#x7cfb;&#x7edf;&#x5185;&#x5b58;&#x63a5;&#x53e3;","children":[{"content":"<code>SystemAlloc(size_t kpage)</code> - &#x5411;&#x7cfb;&#x7edf;&#x7533;&#x8bf7; kpage &#x9875;&#x5185;&#x5b58;","children":[],"payload":{"tag":"li","lines":"103,104"}},{"content":"<code>SystemFree(void* ptr)</code> - &#x5411;&#x7cfb;&#x7edf;&#x91ca;&#x653e;&#x5185;&#x5b58;","children":[],"payload":{"tag":"li","lines":"104,106"}}],"payload":{"tag":"h3","lines":"101,102"}}],"payload":{"tag":"h2","lines":"18,19"}},{"content":"2. ThreadCache","children":[{"content":"&#x6a21;&#x5757;&#x7b80;&#x4ecb;","children":[],"payload":{"tag":"h3","lines":"110,111"}},{"content":"&#x6838;&#x5fc3;&#x7279;&#x6027;","children":[{"content":"<strong>&#x7ebf;&#x7a0b;&#x79c1;&#x6709;</strong>&#xff1a;&#x6bcf;&#x4e2a;&#x7ebf;&#x7a0b;&#x72ec;&#x7acb;&#x62e5;&#x6709;&#xff0c;&#x65e0;&#x9501;&#x7ade;&#x4e89;","children":[],"payload":{"tag":"li","lines":"116,117"}},{"content":"<strong>&#x5feb;&#x901f;&#x5206;&#x914d;</strong>&#xff1a;&#x76f4;&#x63a5;&#x4ece;&#x81ea;&#x7531;&#x94fe;&#x8868;&#x83b7;&#x53d6;&#x5bf9;&#x8c61;","children":[],"payload":{"tag":"li","lines":"117,118"}},{"content":"<strong>&#x6279;&#x91cf;&#x83b7;&#x53d6;</strong>&#xff1a;&#x4ece; CentralCache &#x6279;&#x91cf;&#x83b7;&#x53d6;&#x5bf9;&#x8c61;&#xff0c;&#x51cf;&#x5c11;&#x9501;&#x7ade;&#x4e89;","children":[],"payload":{"tag":"li","lines":"118,119"}},{"content":"<strong>&#x6279;&#x91cf;&#x56de;&#x6536;</strong>&#xff1a;&#x5f53;&#x81ea;&#x7531;&#x94fe;&#x8868;&#x8fc7;&#x957f;&#x65f6;&#xff0c;&#x6279;&#x91cf;&#x5f52;&#x8fd8;&#x7ed9; CentralCache","children":[],"payload":{"tag":"li","lines":"119,121"}}],"payload":{"tag":"h3","lines":"114,115"}},{"content":"&#x4e3b;&#x8981;&#x65b9;&#x6cd5;","children":[{"content":"void* Allocate(size_t size)","children":[{"content":"1. &#x8ba1;&#x7b97;&#x5bf9;&#x9f50;&#x540e;&#x7684;&#x5185;&#x5b58;&#x5927;&#x5c0f;&#x548c;&#x5bf9;&#x5e94;&#x7684;&#x54c8;&#x5e0c;&#x6876;&#x7d22;&#x5f15;","children":[],"payload":{"tag":"li","lines":"129,130","listIndex":1}},{"content":"2. &#x68c0;&#x67e5;&#x5bf9;&#x5e94;&#x54c8;&#x5e0c;&#x6876;&#x7684;&#x81ea;&#x7531;&#x94fe;&#x8868;&#x662f;&#x5426;&#x4e3a;&#x7a7a;","children":[],"payload":{"tag":"li","lines":"130,131","listIndex":2}},{"content":"3. &#x82e5;&#x4e0d;&#x4e3a;&#x7a7a;&#xff0c;&#x76f4;&#x63a5;&#x4ece;&#x94fe;&#x8868;&#x5934;&#x90e8;&#x53d6;&#x51fa;&#x4e00;&#x4e2a;&#x5bf9;&#x8c61;&#x8fd4;&#x56de;","children":[],"payload":{"tag":"li","lines":"131,132","listIndex":3}},{"content":"4. &#x82e5;&#x4e3a;&#x7a7a;&#xff0c;&#x8c03;&#x7528; <code>FetchFromCentralCache</code> &#x4ece; CentralCache &#x6279;&#x91cf;&#x83b7;&#x53d6;&#x5bf9;&#x8c61;","children":[],"payload":{"tag":"li","lines":"132,134","listIndex":4}}],"payload":{"tag":"h4","lines":"123,124"}},{"content":"void Deallocate(void* ptr, size_t size)","children":[{"content":"1. &#x5c06;&#x5bf9;&#x8c61;&#x63d2;&#x5165;&#x5bf9;&#x5e94;&#x54c8;&#x5e0c;&#x6876;&#x7684;&#x81ea;&#x7531;&#x94fe;&#x8868;","children":[],"payload":{"tag":"li","lines":"140,141","listIndex":1}},{"content":"2. &#x68c0;&#x67e5;&#x94fe;&#x8868;&#x957f;&#x5ea6;&#x662f;&#x5426;&#x8d85;&#x8fc7;&#x6700;&#x5927;&#x5bb9;&#x91cf;","children":[],"payload":{"tag":"li","lines":"141,142","listIndex":2}},{"content":"3. &#x82e5;&#x8d85;&#x8fc7;&#xff0c;&#x8c03;&#x7528; <code>ListTooLong</code> &#x6279;&#x91cf;&#x5f52;&#x8fd8;&#x7ed9; CentralCache","children":[],"payload":{"tag":"li","lines":"142,144","listIndex":3}}],"payload":{"tag":"h4","lines":"134,135"}},{"content":"void* FetchFromCentralCache(size_t index, size_t size)","children":[{"content":"&#x91c7;&#x7528;&#x6162;&#x542f;&#x52a8;&#x7b97;&#x6cd5;&#xff0c;&#x521d;&#x59cb;&#x6279;&#x91cf;&#x6570;&#x91cf;&#x4e3a; 1","children":[],"payload":{"tag":"li","lines":"150,151"}},{"content":"&#x6bcf;&#x6b21;&#x6210;&#x529f;&#x83b7;&#x53d6;&#x540e;&#xff0c;&#x6279;&#x91cf;&#x6570;&#x91cf;&#x52a0; 1","children":[],"payload":{"tag":"li","lines":"151,152"}},{"content":"&#x6700;&#x5927;&#x6279;&#x91cf;&#x6570;&#x91cf;&#x7531; <code>SizeClass::NumMoveSize(size)</code> &#x51b3;&#x5b9a;&#xff08;2~512 &#x4e2a;&#xff09;","children":[],"payload":{"tag":"li","lines":"152,154"}}],"payload":{"tag":"h4","lines":"144,145"}},{"content":"void ListTooLong(FreeList&amp; list, size_t size)","children":[],"payload":{"tag":"h4","lines":"154,155"}}],"payload":{"tag":"h3","lines":"121,122"}},{"content":"&#x4f7f;&#x7528;&#x793a;&#x4f8b;","children":[{"content":"<pre data-lines=\"160,173\"><code class=\"language-cpp\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&quot;ConcurrentAlloc.h&quot;</span></span>\n\n<span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">ThreadExample</span><span class=\"hljs-params\">()</span> </span>{\n    <span class=\"hljs-comment\">// &#x5206;&#x914d;&#x5185;&#x5b58;</span>\n    <span class=\"hljs-type\">void</span>* ptr1 = <span class=\"hljs-built_in\">ConcurrentAlloc</span>(<span class=\"hljs-number\">100</span>);\n    <span class=\"hljs-type\">void</span>* ptr2 = <span class=\"hljs-built_in\">ConcurrentAlloc</span>(<span class=\"hljs-number\">256</span>);\n\n    <span class=\"hljs-comment\">// &#x91ca;&#x653e;&#x5185;&#x5b58;</span>\n    <span class=\"hljs-built_in\">ConcurrentFree</span>(ptr1);\n    <span class=\"hljs-built_in\">ConcurrentFree</span>(ptr2);\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"160,173"}}],"payload":{"tag":"h3","lines":"158,159"}}],"payload":{"tag":"h2","lines":"108,109"}},{"content":"3. CentralCache","children":[{"content":"&#x6a21;&#x5757;&#x7b80;&#x4ecb;","children":[],"payload":{"tag":"h3","lines":"178,179"}},{"content":"&#x6838;&#x5fc3;&#x7279;&#x6027;","children":[{"content":"<strong>&#x5355;&#x4f8b;&#x6a21;&#x5f0f;</strong>&#xff1a;&#x5168;&#x5c40;&#x552f;&#x4e00;&#x5b9e;&#x4f8b;","children":[],"payload":{"tag":"li","lines":"184,185"}},{"content":"<strong>&#x54c8;&#x5e0c;&#x6876;&#x9501;</strong>&#xff1a;&#x6bcf;&#x4e2a;&#x54c8;&#x5e0c;&#x6876;&#x6709;&#x72ec;&#x7acb;&#x7684;&#x4e92;&#x65a5;&#x9501;&#xff0c;&#x51cf;&#x5c11;&#x9501;&#x7ade;&#x4e89;","children":[],"payload":{"tag":"li","lines":"185,186"}},{"content":"<strong>Span &#x7ba1;&#x7406;</strong>&#xff1a;&#x7ba1;&#x7406;&#x591a;&#x4e2a; Span&#xff0c;&#x6bcf;&#x4e2a; Span &#x5207;&#x5272;&#x6210;&#x56fa;&#x5b9a;&#x5927;&#x5c0f;&#x7684;&#x5bf9;&#x8c61;","children":[],"payload":{"tag":"li","lines":"186,187"}},{"content":"<strong>&#x52a8;&#x6001;&#x5e73;&#x8861;</strong>&#xff1a;&#x6839;&#x636e; ThreadCache &#x7684;&#x9700;&#x6c42;&#x52a8;&#x6001;&#x8c03;&#x6574; Span &#x7684;&#x5206;&#x914d;","children":[],"payload":{"tag":"li","lines":"187,189"}}],"payload":{"tag":"h3","lines":"182,183"}},{"content":"&#x4e3b;&#x8981;&#x65b9;&#x6cd5;","children":[{"content":"size_t FetchRangeObj(void*&amp; start, void*&amp; end, size_t n, size_t size)","children":[{"content":"1. &#x83b7;&#x53d6;&#x5bf9;&#x5e94;&#x54c8;&#x5e0c;&#x6876;&#x7684; Span","children":[],"payload":{"tag":"li","lines":"197,198","listIndex":1}},{"content":"2. &#x4ece; Span &#x7684;&#x81ea;&#x7531;&#x94fe;&#x8868;&#x4e2d;&#x53d6;&#x51fa; n &#x4e2a;&#x5bf9;&#x8c61;","children":[],"payload":{"tag":"li","lines":"198,199","listIndex":2}},{"content":"3. &#x66f4;&#x65b0; Span &#x7684;&#x4f7f;&#x7528;&#x8ba1;&#x6570;","children":[],"payload":{"tag":"li","lines":"199,200","listIndex":3}},{"content":"4. &#x8fd4;&#x56de;&#x5b9e;&#x9645;&#x83b7;&#x53d6;&#x7684;&#x5bf9;&#x8c61;&#x6570;&#x91cf;","children":[],"payload":{"tag":"li","lines":"200,202","listIndex":4}}],"payload":{"tag":"h4","lines":"191,192"}},{"content":"Span* GetOneSpan(SpanList&amp; spanList, size_t size)","children":[{"content":"1. &#x904d;&#x5386;&#x5f53;&#x524d;&#x54c8;&#x5e0c;&#x6876;&#x7684; SpanList&#xff0c;&#x5bfb;&#x627e;&#x6709;&#x81ea;&#x7531;&#x5bf9;&#x8c61;&#x7684; Span","children":[],"payload":{"tag":"li","lines":"208,209","listIndex":1}},{"content":"2. &#x82e5;&#x627e;&#x5230;&#xff0c;&#x76f4;&#x63a5;&#x8fd4;&#x56de;","children":[],"payload":{"tag":"li","lines":"209,210","listIndex":2}},{"content":"3. &#x82e5;&#x672a;&#x627e;&#x5230;&#xff0c;&#x4ece; PageCache &#x7533;&#x8bf7;&#x65b0;&#x7684; Span","children":[],"payload":{"tag":"li","lines":"210,211","listIndex":3}},{"content":"4. &#x5c06;&#x65b0;&#x7533;&#x8bf7;&#x7684; Span &#x5207;&#x5272;&#x6210;&#x6307;&#x5b9a;&#x5927;&#x5c0f;&#x7684;&#x5bf9;&#x8c61;","children":[],"payload":{"tag":"li","lines":"211,212","listIndex":4}},{"content":"5. &#x5c06; Span &#x63d2;&#x5165;&#x5230;&#x54c8;&#x5e0c;&#x6876;&#x4e2d;","children":[],"payload":{"tag":"li","lines":"212,214","listIndex":5}}],"payload":{"tag":"h4","lines":"202,203"}},{"content":"void ReleaseListToSpans(void* start, size_t size)","children":[{"content":"1. &#x904d;&#x5386;&#x5bf9;&#x8c61;&#x94fe;&#x8868;","children":[],"payload":{"tag":"li","lines":"220,221","listIndex":1}},{"content":"2. &#x901a;&#x8fc7; <code>MapObjectToSpan</code> &#x627e;&#x5230;&#x5bf9;&#x5e94;&#x7684; Span","children":[],"payload":{"tag":"li","lines":"221,222","listIndex":2}},{"content":"3. &#x5c06;&#x5bf9;&#x8c61;&#x63d2;&#x5165; Span &#x7684;&#x81ea;&#x7531;&#x94fe;&#x8868;","children":[],"payload":{"tag":"li","lines":"222,223","listIndex":3}},{"content":"4. &#x66f4;&#x65b0; Span &#x7684;&#x4f7f;&#x7528;&#x8ba1;&#x6570;","children":[],"payload":{"tag":"li","lines":"223,224","listIndex":4}},{"content":"5. &#x82e5; Span &#x7684;&#x4f7f;&#x7528;&#x8ba1;&#x6570;&#x4e3a; 0&#xff0c;&#x5c06; Span &#x5f52;&#x8fd8;&#x7ed9; PageCache","children":[],"payload":{"tag":"li","lines":"224,226","listIndex":5}}],"payload":{"tag":"h4","lines":"214,215"}}],"payload":{"tag":"h3","lines":"189,190"}},{"content":"&#x4f7f;&#x7528;&#x793a;&#x4f8b;","children":[{"content":"<pre data-lines=\"228,238\"><code class=\"language-cpp\"><span class=\"hljs-comment\">// CentralCache &#x901a;&#x5e38;&#x4e0d;&#x76f4;&#x63a5;&#x4f7f;&#x7528;&#xff0c;&#x800c;&#x662f;&#x901a;&#x8fc7; ThreadCache &#x95f4;&#x63a5;&#x8c03;&#x7528;</span>\n<span class=\"hljs-comment\">// &#x4ee5;&#x4e0b;&#x4e3a;&#x5185;&#x90e8;&#x4f7f;&#x7528;&#x793a;&#x4f8b;</span>\n\n<span class=\"hljs-type\">size_t</span> index = SizeClass::<span class=\"hljs-built_in\">Index</span>(size);\n<span class=\"hljs-type\">void</span>* start = <span class=\"hljs-literal\">nullptr</span>;\n<span class=\"hljs-type\">void</span>* end = <span class=\"hljs-literal\">nullptr</span>;\n<span class=\"hljs-type\">size_t</span> n = <span class=\"hljs-number\">10</span>;\n<span class=\"hljs-type\">size_t</span> actualNum = CentralCache::<span class=\"hljs-built_in\">GetInstance</span>()-&gt;<span class=\"hljs-built_in\">FetchRangeObj</span>(start, end, n, size);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"228,238"}}],"payload":{"tag":"h3","lines":"226,227"}}],"payload":{"tag":"h2","lines":"176,177"}},{"content":"4. PageCache","children":[{"content":"&#x6a21;&#x5757;&#x7b80;&#x4ecb;","children":[],"payload":{"tag":"h3","lines":"243,244"}},{"content":"&#x6838;&#x5fc3;&#x7279;&#x6027;","children":[{"content":"<strong>&#x5355;&#x4f8b;&#x6a21;&#x5f0f;</strong>&#xff1a;&#x5168;&#x5c40;&#x552f;&#x4e00;&#x5b9e;&#x4f8b;","children":[],"payload":{"tag":"li","lines":"249,250"}},{"content":"<strong>&#x9875;&#x7ba1;&#x7406;</strong>&#xff1a;&#x4ee5;&#x9875;&#xff08;8KB&#xff09;&#x4e3a;&#x5355;&#x4f4d;&#x7ba1;&#x7406;&#x5185;&#x5b58;","children":[],"payload":{"tag":"li","lines":"250,251"}},{"content":"<strong>Span &#x5408;&#x5e76;</strong>&#xff1a;&#x91ca;&#x653e;&#x65f6;&#x5408;&#x5e76;&#x76f8;&#x90bb;&#x7684;&#x7a7a;&#x95f2; Span&#xff0c;&#x51cf;&#x5c11;&#x5185;&#x5b58;&#x788e;&#x7247;","children":[],"payload":{"tag":"li","lines":"251,252"}},{"content":"<strong>&#x57fa;&#x6570;&#x6811;&#x6620;&#x5c04;</strong>&#xff1a;&#x4f7f;&#x7528;&#x57fa;&#x6570;&#x6811;&#x5feb;&#x901f;&#x67e5;&#x627e;&#x5bf9;&#x8c61;&#x5bf9;&#x5e94;&#x7684; Span","children":[],"payload":{"tag":"li","lines":"252,254"}}],"payload":{"tag":"h3","lines":"247,248"}},{"content":"&#x4e3b;&#x8981;&#x65b9;&#x6cd5;","children":[{"content":"Span* NewSpan(size_t k)","children":[{"content":"1. &#x82e5; k &gt; 128&#xff0c;&#x76f4;&#x63a5;&#x5411;&#x7cfb;&#x7edf;&#x7533;&#x8bf7;","children":[],"payload":{"tag":"li","lines":"262,263","listIndex":1}},{"content":"2. &#x68c0;&#x67e5; k &#x9875;&#x54c8;&#x5e0c;&#x6876;&#x662f;&#x5426;&#x6709;&#x7a7a;&#x95f2; Span","children":[],"payload":{"tag":"li","lines":"263,264","listIndex":2}},{"content":"3. &#x82e5;&#x6709;&#xff0c;&#x76f4;&#x63a5;&#x8fd4;&#x56de;","children":[],"payload":{"tag":"li","lines":"264,265","listIndex":3}},{"content":"4. &#x82e5;&#x6ca1;&#x6709;&#xff0c;&#x67e5;&#x627e;&#x66f4;&#x5927;&#x7684;&#x7a7a;&#x95f2; Span &#x5e76;&#x5206;&#x5272;","children":[],"payload":{"tag":"li","lines":"265,266","listIndex":4}},{"content":"5. &#x82e5;&#x6ca1;&#x6709;&#x66f4;&#x5927;&#x7684; Span&#xff0c;&#x5411;&#x7cfb;&#x7edf;&#x7533;&#x8bf7; 128 &#x9875;&#x7684; Span &#x5e76;&#x5206;&#x5272;","children":[],"payload":{"tag":"li","lines":"266,267","listIndex":5}},{"content":"6. &#x5efa;&#x7acb;&#x9875;&#x53f7;&#x5230; Span &#x7684;&#x6620;&#x5c04;&#x5173;&#x7cfb;","children":[],"payload":{"tag":"li","lines":"267,269","listIndex":6}}],"payload":{"tag":"h4","lines":"256,257"}},{"content":"Span* MapObjectToSpan(void* obj)","children":[{"content":"1. &#x5c06;&#x5bf9;&#x8c61;&#x5730;&#x5740;&#x8f6c;&#x6362;&#x4e3a;&#x9875;&#x53f7;","children":[],"payload":{"tag":"li","lines":"275,276","listIndex":1}},{"content":"2. &#x901a;&#x8fc7;&#x57fa;&#x6570;&#x6811;&#x67e5;&#x627e;&#x9875;&#x53f7;&#x5bf9;&#x5e94;&#x7684; Span","children":[],"payload":{"tag":"li","lines":"276,277","listIndex":2}},{"content":"3. &#x8fd4;&#x56de; Span &#x6307;&#x9488;","children":[],"payload":{"tag":"li","lines":"277,279","listIndex":3}}],"payload":{"tag":"h4","lines":"269,270"}},{"content":"void ReleaseSpanToPageCache(Span* span)","children":[{"content":"1. &#x5411;&#x524d;&#x5408;&#x5e76;&#xff1a;&#x68c0;&#x67e5;&#x524d;&#x4e00;&#x9875;&#x662f;&#x5426;&#x4e3a;&#x7a7a;&#x95f2; Span","children":[],"payload":{"tag":"li","lines":"285,286","listIndex":1}},{"content":"2. &#x5411;&#x540e;&#x5408;&#x5e76;&#xff1a;&#x68c0;&#x67e5;&#x540e;&#x4e00;&#x9875;&#x662f;&#x5426;&#x4e3a;&#x7a7a;&#x95f2; Span","children":[],"payload":{"tag":"li","lines":"286,287","listIndex":2}},{"content":"3. &#x5408;&#x5e76;&#x6761;&#x4ef6;&#xff1a;&#x76f8;&#x90bb; Span &#x90fd;&#x7a7a;&#x95f2;&#x4e14;&#x5408;&#x5e76;&#x540e;&#x4e0d;&#x8d85;&#x8fc7; 128 &#x9875;","children":[],"payload":{"tag":"li","lines":"287,288","listIndex":3}},{"content":"4. &#x5408;&#x5e76;&#x540e;&#x66f4;&#x65b0;&#x6620;&#x5c04;&#x5173;&#x7cfb;","children":[],"payload":{"tag":"li","lines":"288,290","listIndex":4}}],"payload":{"tag":"h4","lines":"279,280"}}],"payload":{"tag":"h3","lines":"254,255"}},{"content":"&#x4f7f;&#x7528;&#x793a;&#x4f8b;","children":[{"content":"<pre data-lines=\"292,302\"><code class=\"language-cpp\"><span class=\"hljs-comment\">// PageCache &#x901a;&#x5e38;&#x4e0d;&#x76f4;&#x63a5;&#x4f7f;&#x7528;&#xff0c;&#x800c;&#x662f;&#x901a;&#x8fc7; CentralCache &#x95f4;&#x63a5;&#x8c03;&#x7528;</span>\n<span class=\"hljs-comment\">// &#x4ee5;&#x4e0b;&#x4e3a;&#x5185;&#x90e8;&#x4f7f;&#x7528;&#x793a;&#x4f8b;</span>\n\n<span class=\"hljs-type\">size_t</span> k = <span class=\"hljs-number\">5</span>;\nSpan* span = PageCache::<span class=\"hljs-built_in\">GetInstance</span>()-&gt;<span class=\"hljs-built_in\">NewSpan</span>(k);\n\n<span class=\"hljs-type\">void</span>* obj = ...;\nSpan* span = PageCache::<span class=\"hljs-built_in\">GetInstance</span>()-&gt;<span class=\"hljs-built_in\">MapObjectToSpan</span>(obj);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"292,302"}}],"payload":{"tag":"h3","lines":"290,291"}}],"payload":{"tag":"h2","lines":"241,242"}},{"content":"5. PageMap","children":[{"content":"&#x6a21;&#x5757;&#x7b80;&#x4ecb;","children":[],"payload":{"tag":"h3","lines":"307,308"}},{"content":"&#x4e09;&#x79cd;&#x5b9e;&#x73b0;","children":[{"content":"TCMalloc_PageMap1 - &#x5355;&#x5c42;&#x57fa;&#x6570;&#x6811;","children":[{"content":"&#x7b80;&#x5355;&#x76f4;&#x63a5;&#xff0c;&#x4e00;&#x6b21;&#x6027;&#x5206;&#x914d;&#x6240;&#x6709;&#x7a7a;&#x95f4;","children":[],"payload":{"tag":"li","lines":"319,320"}},{"content":"&#x9002;&#x7528;&#x4e8e; BITS &#x8f83;&#x5c0f;&#x7684;&#x573a;&#x666f;","children":[],"payload":{"tag":"li","lines":"320,322"}}],"payload":{"tag":"h4","lines":"313,314"}},{"content":"TCMalloc_PageMap2 - &#x4e8c;&#x5c42;&#x57fa;&#x6570;&#x6811;","children":[{"content":"&#x7b2c;&#x4e00;&#x5c42;&#x5b58;&#x50a8;&#x6307;&#x5411;&#x7b2c;&#x4e8c;&#x5c42;&#x7684;&#x6307;&#x9488;","children":[],"payload":{"tag":"li","lines":"328,329"}},{"content":"&#x7b2c;&#x4e8c;&#x5c42;&#x5b58;&#x50a8;&#x5b9e;&#x9645;&#x7684; Span &#x6307;&#x9488;","children":[],"payload":{"tag":"li","lines":"329,330"}},{"content":"&#x6309;&#x9700;&#x5206;&#x914d;&#x7b2c;&#x4e8c;&#x5c42;&#x7a7a;&#x95f4;&#xff0c;&#x8282;&#x7701;&#x5185;&#x5b58;","children":[],"payload":{"tag":"li","lines":"330,332"}}],"payload":{"tag":"h4","lines":"322,323"}},{"content":"TCMalloc_PageMap3 - &#x4e09;&#x5c42;&#x57fa;&#x6570;&#x6811;","children":[{"content":"&#x4e09;&#x5c42;&#x7ed3;&#x6784;&#xff0c;&#x652f;&#x6301;&#x66f4;&#x5927;&#x7684;&#x5730;&#x5740;&#x7a7a;&#x95f4;","children":[],"payload":{"tag":"li","lines":"338,339"}},{"content":"&#x5b8c;&#x5168;&#x6309;&#x9700;&#x5206;&#x914d;&#xff0c;&#x5185;&#x5b58;&#x5229;&#x7528;&#x7387;&#x9ad8;","children":[],"payload":{"tag":"li","lines":"339,340"}},{"content":"&#x9002;&#x7528;&#x4e8e; BITS &#x8f83;&#x5927;&#x7684;&#x573a;&#x666f;","children":[],"payload":{"tag":"li","lines":"340,342"}}],"payload":{"tag":"h4","lines":"332,333"}}],"payload":{"tag":"h3","lines":"311,312"}},{"content":"&#x4e3b;&#x8981;&#x65b9;&#x6cd5;","children":[{"content":"void* get(Number k) const","children":[],"payload":{"tag":"h4","lines":"344,345"}},{"content":"void set(Number k, void* v)","children":[],"payload":{"tag":"h4","lines":"348,349"}},{"content":"bool Ensure(Number start, size_t n)","children":[],"payload":{"tag":"h4","lines":"352,353"}}],"payload":{"tag":"h3","lines":"342,343"}},{"content":"&#x4f7f;&#x7528;&#x793a;&#x4f8b;","children":[{"content":"<pre data-lines=\"358,370\"><code class=\"language-cpp\"><span class=\"hljs-comment\">// &#x521b;&#x5efa;&#x4e09;&#x5c42;&#x57fa;&#x6570;&#x6811;</span>\nTCMalloc_PageMap3&lt;<span class=\"hljs-number\">64</span> - PAGE_SHIFT&gt; pageMap;\n\n<span class=\"hljs-comment\">// &#x5efa;&#x7acb;&#x6620;&#x5c04;</span>\nSpan* span = ...;\nPAGE_ID pageId = <span class=\"hljs-number\">100</span>;\npageMap.<span class=\"hljs-built_in\">set</span>(pageId, span);\n\n<span class=\"hljs-comment\">// &#x67e5;&#x627e;&#x6620;&#x5c04;</span>\nSpan* foundSpan = (Span*)pageMap.<span class=\"hljs-built_in\">get</span>(pageId);\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"358,370"}}],"payload":{"tag":"h3","lines":"356,357"}}],"payload":{"tag":"h2","lines":"305,306"}},{"content":"6. ObjectPool","children":[{"content":"&#x6a21;&#x5757;&#x7b80;&#x4ecb;","children":[],"payload":{"tag":"h3","lines":"375,376"}},{"content":"&#x6838;&#x5fc3;&#x7279;&#x6027;","children":[{"content":"<strong>&#x5185;&#x5b58;&#x590d;&#x7528;</strong>&#xff1a;&#x91ca;&#x653e;&#x7684;&#x5bf9;&#x8c61;&#x88ab;&#x653e;&#x5165;&#x81ea;&#x7531;&#x94fe;&#x8868;&#xff0c;&#x4e0b;&#x6b21;&#x5206;&#x914d;&#x65f6;&#x76f4;&#x63a5;&#x590d;&#x7528;","children":[],"payload":{"tag":"li","lines":"381,382"}},{"content":"<strong>&#x6279;&#x91cf;&#x7533;&#x8bf7;</strong>&#xff1a;&#x5411;&#x7cfb;&#x7edf;&#x6279;&#x91cf;&#x7533;&#x8bf7;&#x5185;&#x5b58;&#xff0c;&#x51cf;&#x5c11;&#x7cfb;&#x7edf;&#x8c03;&#x7528;&#x6b21;&#x6570;","children":[],"payload":{"tag":"li","lines":"382,383"}},{"content":"<strong>&#x5b9a;&#x4f4d; new</strong>&#xff1a;&#x652f;&#x6301;&#x8c03;&#x7528;&#x5bf9;&#x8c61;&#x7684;&#x6784;&#x9020;&#x51fd;&#x6570;","children":[],"payload":{"tag":"li","lines":"383,384"}},{"content":"<strong>&#x663e;&#x5f0f;&#x6790;&#x6784;</strong>&#xff1a;&#x91ca;&#x653e;&#x65f6;&#x663e;&#x5f0f;&#x8c03;&#x7528;&#x5bf9;&#x8c61;&#x7684;&#x6790;&#x6784;&#x51fd;&#x6570;","children":[],"payload":{"tag":"li","lines":"384,386"}}],"payload":{"tag":"h3","lines":"379,380"}},{"content":"&#x4e3b;&#x8981;&#x65b9;&#x6cd5;","children":[{"content":"T* New()","children":[{"content":"1. &#x68c0;&#x67e5;&#x81ea;&#x7531;&#x94fe;&#x8868;&#x662f;&#x5426;&#x6709;&#x53ef;&#x7528;&#x5bf9;&#x8c61;","children":[],"payload":{"tag":"li","lines":"394,395","listIndex":1}},{"content":"2. &#x82e5;&#x6709;&#xff0c;&#x4ece;&#x81ea;&#x7531;&#x94fe;&#x8868;&#x53d6;&#x51fa;","children":[],"payload":{"tag":"li","lines":"395,396","listIndex":2}},{"content":"3. &#x82e5;&#x6ca1;&#x6709;&#xff0c;&#x4ece;&#x5927;&#x5757;&#x5185;&#x5b58;&#x4e2d;&#x5207;&#x5206;","children":[],"payload":{"tag":"li","lines":"396,397","listIndex":3}},{"content":"4. &#x82e5;&#x5927;&#x5757;&#x5185;&#x5b58;&#x4e0d;&#x8db3;&#xff0c;&#x5411;&#x7cfb;&#x7edf;&#x7533;&#x8bf7;&#x65b0;&#x7684;&#x5927;&#x5757;&#x5185;&#x5b58;&#xff08;128KB&#xff09;","children":[],"payload":{"tag":"li","lines":"397,398","listIndex":4}},{"content":"5. &#x8c03;&#x7528;&#x5b9a;&#x4f4d; new &#x6267;&#x884c;&#x6784;&#x9020;&#x51fd;&#x6570;","children":[],"payload":{"tag":"li","lines":"398,399","listIndex":5}},{"content":"6. &#x8fd4;&#x56de;&#x5bf9;&#x8c61;&#x6307;&#x9488;","children":[],"payload":{"tag":"li","lines":"399,401","listIndex":6}}],"payload":{"tag":"h4","lines":"388,389"}},{"content":"void Delete(T* obj)","children":[{"content":"1. &#x663e;&#x5f0f;&#x8c03;&#x7528;&#x5bf9;&#x8c61;&#x7684;&#x6790;&#x6784;&#x51fd;&#x6570;","children":[],"payload":{"tag":"li","lines":"407,408","listIndex":1}},{"content":"2. &#x5c06;&#x5bf9;&#x8c61;&#x63d2;&#x5165;&#x81ea;&#x7531;&#x94fe;&#x8868;","children":[],"payload":{"tag":"li","lines":"408,410","listIndex":2}}],"payload":{"tag":"h4","lines":"401,402"}}],"payload":{"tag":"h3","lines":"386,387"}},{"content":"&#x4f7f;&#x7528;&#x793a;&#x4f8b;","children":[{"content":"<pre data-lines=\"412,439\"><code class=\"language-cpp\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&quot;ObjectPool.h&quot;</span></span>\n\n<span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">TreeNode</span> {\n    <span class=\"hljs-type\">int</span> _val;\n    TreeNode* _left;\n    TreeNode* _right;\n    \n    <span class=\"hljs-built_in\">TreeNode</span>() : _val(<span class=\"hljs-number\">0</span>), _left(<span class=\"hljs-literal\">nullptr</span>), _right(<span class=\"hljs-literal\">nullptr</span>) {}\n};\n\n<span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">Example</span><span class=\"hljs-params\">()</span> </span>{\n    ObjectPool&lt;TreeNode&gt; pool;\n    \n    <span class=\"hljs-comment\">// &#x5206;&#x914d;&#x5bf9;&#x8c61;</span>\n    TreeNode* node1 = pool.<span class=\"hljs-built_in\">New</span>();\n    TreeNode* node2 = pool.<span class=\"hljs-built_in\">New</span>();\n    \n    <span class=\"hljs-comment\">// &#x4f7f;&#x7528;&#x5bf9;&#x8c61;</span>\n    node1-&gt;_val = <span class=\"hljs-number\">10</span>;\n    node2-&gt;_val = <span class=\"hljs-number\">20</span>;\n    \n    <span class=\"hljs-comment\">// &#x91ca;&#x653e;&#x5bf9;&#x8c61;</span>\n    pool.<span class=\"hljs-built_in\">Delete</span>(node1);\n    pool.<span class=\"hljs-built_in\">Delete</span>(node2);\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"412,439"}}],"payload":{"tag":"h3","lines":"410,411"}},{"content":"&#x6027;&#x80fd;&#x4f18;&#x52bf;","children":[{"content":"1. <strong>&#x51cf;&#x5c11;&#x7cfb;&#x7edf;&#x8c03;&#x7528;</strong>&#xff1a;&#x6279;&#x91cf;&#x7533;&#x8bf7;&#x5185;&#x5b58;&#xff0c;&#x51cf;&#x5c11;&#x4e0e;&#x64cd;&#x4f5c;&#x7cfb;&#x7edf;&#x7684;&#x4ea4;&#x4e92;","children":[],"payload":{"tag":"li","lines":"444,445","listIndex":1}},{"content":"2. <strong>&#x51cf;&#x5c11;&#x5185;&#x5b58;&#x788e;&#x7247;</strong>&#xff1a;&#x5bf9;&#x8c61;&#x5927;&#x5c0f;&#x56fa;&#x5b9a;&#xff0c;&#x5185;&#x5b58;&#x5e03;&#x5c40;&#x7d27;&#x51d1;","children":[],"payload":{"tag":"li","lines":"445,446","listIndex":2}},{"content":"3. <strong>&#x63d0;&#x9ad8;&#x7f13;&#x5b58;&#x547d;&#x4e2d;&#x7387;</strong>&#xff1a;&#x8fde;&#x7eed;&#x5185;&#x5b58;&#x5206;&#x914d;&#xff0c;&#x63d0;&#x9ad8; CPU &#x7f13;&#x5b58;&#x5229;&#x7528;&#x7387;","children":[],"payload":{"tag":"li","lines":"446,447","listIndex":3}},{"content":"4. <strong>&#x964d;&#x4f4e;&#x9501;&#x7ade;&#x4e89;</strong>&#xff1a;&#x7ebf;&#x7a0b;&#x79c1;&#x6709;&#x5bf9;&#x8c61;&#x6c60;&#xff0c;&#x907f;&#x514d;&#x591a;&#x7ebf;&#x7a0b;&#x7ade;&#x4e89;","children":[],"payload":{"tag":"li","lines":"447,449","listIndex":4}}],"payload":{"tag":"h3","lines":"440,441"}}],"payload":{"tag":"h2","lines":"373,374"}},{"content":"7. ConcurrentAlloc","children":[{"content":"&#x6a21;&#x5757;&#x7b80;&#x4ecb;","children":[],"payload":{"tag":"h3","lines":"453,454"}},{"content":"&#x6838;&#x5fc3;&#x7279;&#x6027;","children":[{"content":"<strong>&#x7edf;&#x4e00;&#x63a5;&#x53e3;</strong>&#xff1a;&#x63d0;&#x4f9b;&#x7b80;&#x5355;&#x7684;&#x5206;&#x914d;&#x548c;&#x91ca;&#x653e;&#x51fd;&#x6570;","children":[],"payload":{"tag":"li","lines":"459,460"}},{"content":"<strong>&#x81ea;&#x52a8;&#x8def;&#x7531;</strong>&#xff1a;&#x6839;&#x636e;&#x5927;&#x5c0f;&#x81ea;&#x52a8;&#x9009;&#x62e9; ThreadCache &#x6216;&#x76f4;&#x63a5;&#x5206;&#x914d;","children":[],"payload":{"tag":"li","lines":"460,461"}},{"content":"<strong>TLS &#x652f;&#x6301;</strong>&#xff1a;&#x81ea;&#x52a8;&#x4e3a;&#x6bcf;&#x4e2a;&#x7ebf;&#x7a0b;&#x521b;&#x5efa; ThreadCache","children":[],"payload":{"tag":"li","lines":"461,462"}},{"content":"<strong>&#x5927;&#x5185;&#x5b58;&#x652f;&#x6301;</strong>&#xff1a;&#x652f;&#x6301;&#x8d85;&#x8fc7; 256KB &#x7684;&#x5927;&#x5185;&#x5b58;&#x5206;&#x914d;","children":[],"payload":{"tag":"li","lines":"462,464"}}],"payload":{"tag":"h3","lines":"457,458"}},{"content":"&#x4e3b;&#x8981;&#x51fd;&#x6570;","children":[{"content":"void* ConcurrentAlloc(size_t size)","children":[{"content":"1. &#x82e5; size &gt; 256KB&#xff1a;","children":[{"content":"&#x8ba1;&#x7b97;&#x9700;&#x8981;&#x7684;&#x9875;&#x6570;","children":[],"payload":{"tag":"li","lines":"473,474"}},{"content":"&#x76f4;&#x63a5;&#x4ece; PageCache &#x83b7;&#x53d6;&#x5bf9;&#x5e94;&#x9875;&#x6570;&#x7684; Span","children":[],"payload":{"tag":"li","lines":"474,475"}},{"content":"&#x8fd4;&#x56de; Span &#x7684;&#x8d77;&#x59cb;&#x5730;&#x5740;","children":[],"payload":{"tag":"li","lines":"475,476"}}],"payload":{"tag":"li","lines":"472,476","listIndex":1}},{"content":"2. &#x82e5; size &lt;= 256KB&#xff1a;","children":[{"content":"&#x901a;&#x8fc7; TLS &#x83b7;&#x53d6;&#x5f53;&#x524d;&#x7ebf;&#x7a0b;&#x7684; ThreadCache","children":[],"payload":{"tag":"li","lines":"477,478"}},{"content":"&#x4ece; ThreadCache &#x5206;&#x914d;&#x5185;&#x5b58;","children":[],"payload":{"tag":"li","lines":"478,479"}},{"content":"&#x8fd4;&#x56de;&#x5bf9;&#x8c61;&#x5730;&#x5740;","children":[],"payload":{"tag":"li","lines":"479,481"}}],"payload":{"tag":"li","lines":"476,481","listIndex":2}}],"payload":{"tag":"h4","lines":"466,467"}},{"content":"void ConcurrentFree(void* ptr)","children":[{"content":"1. &#x901a;&#x8fc7; <code>MapObjectToSpan</code> &#x627e;&#x5230;&#x5bf9;&#x5e94;&#x7684; Span","children":[],"payload":{"tag":"li","lines":"487,488","listIndex":1}},{"content":"2. &#x83b7;&#x53d6; Span &#x4e2d;&#x5bf9;&#x8c61;&#x7684;&#x5927;&#x5c0f;","children":[],"payload":{"tag":"li","lines":"488,489","listIndex":2}},{"content":"3. &#x82e5;&#x5927;&#x5c0f; &gt; 256KB&#xff1a;","children":[{"content":"&#x76f4;&#x63a5;&#x5c06; Span &#x5f52;&#x8fd8;&#x7ed9; PageCache","children":[],"payload":{"tag":"li","lines":"490,491"}}],"payload":{"tag":"li","lines":"489,491","listIndex":3}},{"content":"4. &#x82e5;&#x5927;&#x5c0f; &lt;= 256KB&#xff1a;","children":[{"content":"&#x901a;&#x8fc7; TLS &#x83b7;&#x53d6;&#x5f53;&#x524d;&#x7ebf;&#x7a0b;&#x7684; ThreadCache","children":[],"payload":{"tag":"li","lines":"492,493"}},{"content":"&#x4ece; ThreadCache &#x91ca;&#x653e;&#x5185;&#x5b58;","children":[],"payload":{"tag":"li","lines":"493,495"}}],"payload":{"tag":"li","lines":"491,495","listIndex":4}}],"payload":{"tag":"h4","lines":"481,482"}}],"payload":{"tag":"h3","lines":"464,465"}},{"content":"&#x4f7f;&#x7528;&#x793a;&#x4f8b;","children":[{"content":"&#x57fa;&#x672c;&#x4f7f;&#x7528;","children":[{"content":"<pre data-lines=\"499,517\"><code class=\"language-cpp\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&quot;ConcurrentAlloc.h&quot;</span></span>\n\n<span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">BasicExample</span><span class=\"hljs-params\">()</span> </span>{\n    <span class=\"hljs-comment\">// &#x5206;&#x914d;&#x5c0f;&#x5185;&#x5b58;</span>\n    <span class=\"hljs-type\">void</span>* ptr1 = <span class=\"hljs-built_in\">ConcurrentAlloc</span>(<span class=\"hljs-number\">100</span>);\n    <span class=\"hljs-type\">void</span>* ptr2 = <span class=\"hljs-built_in\">ConcurrentAlloc</span>(<span class=\"hljs-number\">256</span>);\n    <span class=\"hljs-type\">void</span>* ptr3 = <span class=\"hljs-built_in\">ConcurrentAlloc</span>(<span class=\"hljs-number\">8192</span>);\n    \n    <span class=\"hljs-comment\">// &#x4f7f;&#x7528;&#x5185;&#x5b58;</span>\n    <span class=\"hljs-comment\">// ...</span>\n    \n    <span class=\"hljs-comment\">// &#x91ca;&#x653e;&#x5185;&#x5b58;</span>\n    <span class=\"hljs-built_in\">ConcurrentFree</span>(ptr1);\n    <span class=\"hljs-built_in\">ConcurrentFree</span>(ptr2);\n    <span class=\"hljs-built_in\">ConcurrentFree</span>(ptr3);\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"499,517"}}],"payload":{"tag":"h4","lines":"497,498"}},{"content":"&#x591a;&#x7ebf;&#x7a0b;&#x4f7f;&#x7528;","children":[{"content":"<pre data-lines=\"520,557\"><code class=\"language-cpp\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&quot;ConcurrentAlloc.h&quot;</span></span>\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;thread&gt;</span></span>\n<span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;vector&gt;</span></span>\n\n<span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">ThreadWorker</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> id)</span> </span>{\n    std::vector&lt;<span class=\"hljs-type\">void</span>*&gt; ptrs;\n    \n    <span class=\"hljs-comment\">// &#x6bcf;&#x4e2a;&#x7ebf;&#x7a0b;&#x5206;&#x914d; 1000 &#x4e2a;&#x5bf9;&#x8c61;</span>\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">1000</span>; i++) {\n        ptrs.<span class=\"hljs-built_in\">push_back</span>(<span class=\"hljs-built_in\">ConcurrentAlloc</span>(<span class=\"hljs-number\">64</span> + (i % <span class=\"hljs-number\">128</span>)));\n    }\n    \n    <span class=\"hljs-comment\">// &#x4f7f;&#x7528;&#x5185;&#x5b58;</span>\n    <span class=\"hljs-comment\">// ...</span>\n    \n    <span class=\"hljs-comment\">// &#x91ca;&#x653e;&#x6240;&#x6709;&#x5bf9;&#x8c61;</span>\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">void</span>* ptr : ptrs) {\n        <span class=\"hljs-built_in\">ConcurrentFree</span>(ptr);\n    }\n}\n\n<span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">MultiThreadExample</span><span class=\"hljs-params\">()</span> </span>{\n    <span class=\"hljs-type\">const</span> <span class=\"hljs-type\">int</span> threadCount = <span class=\"hljs-number\">4</span>;\n    std::vector&lt;std::thread&gt; threads;\n    \n    <span class=\"hljs-comment\">// &#x521b;&#x5efa;&#x591a;&#x4e2a;&#x7ebf;&#x7a0b;</span>\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; threadCount; i++) {\n        threads.<span class=\"hljs-built_in\">emplace_back</span>(ThreadWorker, i);\n    }\n    \n    <span class=\"hljs-comment\">// &#x7b49;&#x5f85;&#x6240;&#x6709;&#x7ebf;&#x7a0b;&#x5b8c;&#x6210;</span>\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">auto</span>&amp; t : threads) {\n        t.<span class=\"hljs-built_in\">join</span>();\n    }\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"520,557"}}],"payload":{"tag":"h4","lines":"518,519"}},{"content":"&#x5927;&#x5185;&#x5b58;&#x5206;&#x914d;","children":[{"content":"<pre data-lines=\"560,576\"><code class=\"language-cpp\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&quot;ConcurrentAlloc.h&quot;</span></span>\n\n<span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">BigMemoryExample</span><span class=\"hljs-params\">()</span> </span>{\n    <span class=\"hljs-comment\">// &#x5206;&#x914d;&#x5927;&#x5185;&#x5b58;&#xff08;&#x8d85;&#x8fc7; 256KB&#xff09;</span>\n    <span class=\"hljs-type\">void</span>* ptr1 = <span class=\"hljs-built_in\">ConcurrentAlloc</span>(<span class=\"hljs-number\">512</span> * <span class=\"hljs-number\">1024</span>);  <span class=\"hljs-comment\">// 512KB</span>\n    <span class=\"hljs-type\">void</span>* ptr2 = <span class=\"hljs-built_in\">ConcurrentAlloc</span>(<span class=\"hljs-number\">1024</span> * <span class=\"hljs-number\">1024</span>); <span class=\"hljs-comment\">// 1MB</span>\n    \n    <span class=\"hljs-comment\">// &#x4f7f;&#x7528;&#x5185;&#x5b58;</span>\n    <span class=\"hljs-comment\">// ...</span>\n    \n    <span class=\"hljs-comment\">// &#x91ca;&#x653e;&#x5185;&#x5b58;</span>\n    <span class=\"hljs-built_in\">ConcurrentFree</span>(ptr1);\n    <span class=\"hljs-built_in\">ConcurrentFree</span>(ptr2);\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"560,576"}}],"payload":{"tag":"h4","lines":"558,559"}}],"payload":{"tag":"h3","lines":"495,496"}},{"content":"&#x6027;&#x80fd;&#x5bf9;&#x6bd4;","children":[{"content":"<pre data-lines=\"589,600\"><code class=\"language-cpp\"><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span> </span>{\n    <span class=\"hljs-type\">size_t</span> n = <span class=\"hljs-number\">10000</span>;\n    cout &lt;&lt; <span class=\"hljs-string\">&quot;==========================================================&quot;</span> &lt;&lt; endl;\n    <span class=\"hljs-built_in\">BenchmarkConcurrentMalloc</span>(n, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">10</span>);  <span class=\"hljs-comment\">// &#x6d4b;&#x8bd5; ConcurrentAlloc</span>\n    cout &lt;&lt; endl &lt;&lt; endl;\n    <span class=\"hljs-built_in\">BenchmarkMalloc</span>(n, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">10</span>);            <span class=\"hljs-comment\">// &#x6d4b;&#x8bd5; malloc/free</span>\n    cout &lt;&lt; <span class=\"hljs-string\">&quot;==========================================================&quot;</span> &lt;&lt; endl;\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"589,600"}}],"payload":{"tag":"h3","lines":"577,578"}}],"payload":{"tag":"h2","lines":"451,452"}},{"content":"&#x5185;&#x5b58;&#x5206;&#x914d;&#x6d41;&#x7a0b;&#x56fe;","children":[{"content":"<pre data-lines=\"605,638\"><code data-lines=\"605,638\"><span class=\"hljs-built_in\">ConcurrentAlloc</span>(size)\n    &#x2502;\n    &#x251c;&#x2500; size &gt; <span class=\"hljs-number\">256</span>KB\n    &#x2502;   &#x2514;&#x2500; PageCache::<span class=\"hljs-built_in\">NewSpan</span>(kPage)\n    &#x2502;       &#x2514;&#x2500; <span class=\"hljs-built_in\">SystemAlloc</span>(kPage)\n    &#x2502;\n    &#x2514;&#x2500; size &lt;= <span class=\"hljs-number\">256</span>KB\n        &#x2514;&#x2500; ThreadCache::<span class=\"hljs-built_in\">Allocate</span>(size)\n            &#x2502;\n            &#x251c;&#x2500; &#x81ea;&#x7531;&#x94fe;&#x8868;&#x6709;&#x5bf9;&#x8c61;\n            &#x2502;   &#x2514;&#x2500; FreeList::<span class=\"hljs-built_in\">Pop</span>()\n            &#x2502;\n            &#x2514;&#x2500; &#x81ea;&#x7531;&#x94fe;&#x8868;&#x4e3a;&#x7a7a;\n                &#x2514;&#x2500; ThreadCache::<span class=\"hljs-built_in\">FetchFromCentralCache</span>()\n                    &#x2514;&#x2500; CentralCache::<span class=\"hljs-built_in\">FetchRangeObj</span>()\n                        &#x2502;\n                        &#x251c;&#x2500; &#x6709;&#x53ef;&#x7528; Span\n                        &#x2502;   &#x2514;&#x2500; &#x4ece; Span &#x53d6;&#x51fa;&#x5bf9;&#x8c61;\n                        &#x2502;\n                        &#x2514;&#x2500; &#x65e0;&#x53ef;&#x7528; Span\n                            &#x2514;&#x2500; CentralCache::<span class=\"hljs-built_in\">GetOneSpan</span>()\n                                &#x2514;&#x2500; PageCache::<span class=\"hljs-built_in\">NewSpan</span>(k)\n                                    &#x2502;\n                                    &#x251c;&#x2500; k &#x9875;&#x6876;&#x6709;&#x7a7a;&#x95f2; Span\n                                    &#x2502;   &#x2514;&#x2500; &#x76f4;&#x63a5;&#x8fd4;&#x56de;\n                                    &#x2502;\n                                    &#x251c;&#x2500; &#x66f4;&#x5927;&#x9875;&#x6876;&#x6709;&#x7a7a;&#x95f2; Span\n                                    &#x2502;   &#x2514;&#x2500; &#x5206;&#x5272;&#x5e76;&#x8fd4;&#x56de;\n                                    &#x2502;\n                                    &#x2514;&#x2500; &#x65e0;&#x7a7a;&#x95f2; Span\n                                        &#x2514;&#x2500; <span class=\"hljs-built_in\">SystemAlloc</span>(<span class=\"hljs-number\">128</span>&#x9875;)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"605,638"}}],"payload":{"tag":"h2","lines":"603,604"}},{"content":"&#x5185;&#x5b58;&#x91ca;&#x653e;&#x6d41;&#x7a0b;&#x56fe;","children":[{"content":"<pre data-lines=\"641,665\"><code data-lines=\"641,665\"><span class=\"hljs-built_in\">ConcurrentFree</span>(ptr)\n    &#x2502;\n    &#x251c;&#x2500; size &gt; <span class=\"hljs-number\">256</span>KB\n    &#x2502;   &#x2514;&#x2500; PageCache::<span class=\"hljs-built_in\">ReleaseSpanToPageCache</span>()\n    &#x2502;       &#x2514;&#x2500; <span class=\"hljs-built_in\">SystemFree</span>(ptr)\n    &#x2502;\n    &#x2514;&#x2500; size &lt;= <span class=\"hljs-number\">256</span>KB\n        &#x2514;&#x2500; ThreadCache::<span class=\"hljs-built_in\">Deallocate</span>(ptr, size)\n            &#x2502;\n            &#x251c;&#x2500; &#x81ea;&#x7531;&#x94fe;&#x8868;&#x672a;&#x6ee1;\n            &#x2502;   &#x2514;&#x2500; FreeList::<span class=\"hljs-built_in\">Push</span>(ptr)\n            &#x2502;\n            &#x2514;&#x2500; &#x81ea;&#x7531;&#x94fe;&#x8868;&#x5df2;&#x6ee1;\n                &#x2514;&#x2500; ThreadCache::<span class=\"hljs-built_in\">ListTooLong</span>()\n                    &#x2514;&#x2500; CentralCache::<span class=\"hljs-built_in\">ReleaseListToSpans</span>()\n                        &#x2502;\n                        &#x251c;&#x2500; Span &#x4ecd;&#x5728;&#x4f7f;&#x7528;\n                        &#x2502;   &#x2514;&#x2500; &#x63d2;&#x5165; Span &#x7684;&#x81ea;&#x7531;&#x94fe;&#x8868;\n                        &#x2502;\n                        &#x2514;&#x2500; Span &#x5df2;&#x5b8c;&#x5168;&#x91ca;&#x653e;\n                            &#x2514;&#x2500; PageCache::<span class=\"hljs-built_in\">ReleaseSpanToPageCache</span>()\n                                &#x2514;&#x2500; &#x5c1d;&#x8bd5;&#x5408;&#x5e76;&#x76f8;&#x90bb; Span\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"641,665"}}],"payload":{"tag":"h2","lines":"639,640"}},{"content":"&#x6ce8;&#x610f;&#x4e8b;&#x9879;","children":[{"content":"1. <strong>&#x5185;&#x5b58;&#x5927;&#x5c0f;&#x9650;&#x5236;</strong>&#xff1a;ThreadCache &#x6700;&#x591a;&#x5206;&#x914d; 256KB&#xff0c;&#x8d85;&#x8fc7;&#x6b64;&#x5927;&#x5c0f;&#x76f4;&#x63a5;&#x4ece; PageCache &#x5206;&#x914d;","children":[],"payload":{"tag":"li","lines":"668,669","listIndex":1}},{"content":"2. <strong>&#x7ebf;&#x7a0b;&#x5b89;&#x5168;</strong>&#xff1a;ConcurrentAlloc &#x548c; ConcurrentFree &#x662f;&#x7ebf;&#x7a0b;&#x5b89;&#x5168;&#x7684;&#xff0c;&#x53ef;&#x4ee5;&#x5728;&#x591a;&#x7ebf;&#x7a0b;&#x73af;&#x5883;&#x4e2d;&#x4f7f;&#x7528;","children":[],"payload":{"tag":"li","lines":"669,670","listIndex":2}},{"content":"3. <strong>&#x5185;&#x5b58;&#x5bf9;&#x9f50;</strong>&#xff1a;&#x6240;&#x6709;&#x5206;&#x914d;&#x7684;&#x5185;&#x5b58;&#x90fd;&#x4f1a;&#x6309;&#x7279;&#x5b9a;&#x89c4;&#x5219;&#x5bf9;&#x9f50;&#xff0c;&#x53ef;&#x80fd;&#x6bd4;&#x8bf7;&#x6c42;&#x7684;&#x5927;&#x5c0f;&#x7565;&#x5927;","children":[],"payload":{"tag":"li","lines":"670,671","listIndex":3}},{"content":"4. <strong>&#x5bf9;&#x8c61;&#x6c60;&#x590d;&#x7528;</strong>&#xff1a;&#x91ca;&#x653e;&#x7684;&#x5185;&#x5b58;&#x4f1a;&#x88ab;&#x653e;&#x5165;&#x81ea;&#x7531;&#x94fe;&#x8868;&#xff0c;&#x4e0b;&#x6b21;&#x5206;&#x914d;&#x65f6;&#x4f18;&#x5148;&#x590d;&#x7528;","children":[],"payload":{"tag":"li","lines":"671,672","listIndex":4}},{"content":"5. <strong>Span &#x5408;&#x5e76;</strong>&#xff1a;PageCache &#x4f1a;&#x5c1d;&#x8bd5;&#x5408;&#x5e76;&#x76f8;&#x90bb;&#x7684;&#x7a7a;&#x95f2; Span&#xff0c;&#x51cf;&#x5c11;&#x5185;&#x5b58;&#x788e;&#x7247;","children":[],"payload":{"tag":"li","lines":"672,674","listIndex":5}}],"payload":{"tag":"h2","lines":"666,667"}},{"content":"&#x7f16;&#x8bd1;&#x548c;&#x8fd0;&#x884c;","children":[{"content":"&#x7f16;&#x8bd1;","children":[],"payload":{"tag":"h3","lines":"676,677"}},{"content":"&#x8fd0;&#x884c;&#x6d4b;&#x8bd5;","children":[{"content":"1. <strong>&#x5355;&#x5143;&#x6d4b;&#x8bd5;</strong>&#xff1a;&#x8fd0;&#x884c; <code>UnitTest.cpp</code> &#x4e2d;&#x7684;&#x6d4b;&#x8bd5;&#x7528;&#x4f8b;","children":[],"payload":{"tag":"li","lines":"682,683","listIndex":1}},{"content":"2. <strong>&#x6027;&#x80fd;&#x6d4b;&#x8bd5;</strong>&#xff1a;&#x8fd0;&#x884c; <code>Benchmark.cpp</code> &#x4e2d;&#x7684;&#x6027;&#x80fd;&#x5bf9;&#x6bd4;&#x6d4b;&#x8bd5;","children":[],"payload":{"tag":"li","lines":"683,685","listIndex":2}}],"payload":{"tag":"h3","lines":"680,681"}},{"content":"&#x6d4b;&#x8bd5;&#x7528;&#x4f8b;","children":[{"content":"<code>TLSTest()</code> - &#x6d4b;&#x8bd5;&#x7ebf;&#x7a0b;&#x672c;&#x5730;&#x5b58;&#x50a8;","children":[],"payload":{"tag":"li","lines":"689,690"}},{"content":"<code>TestConcurrentAlloc1()</code> - &#x57fa;&#x672c;&#x5206;&#x914d;&#x6d4b;&#x8bd5;","children":[],"payload":{"tag":"li","lines":"690,691"}},{"content":"<code>TestConcurrentAlloc2()</code> - &#x6279;&#x91cf;&#x5206;&#x914d;&#x6d4b;&#x8bd5;","children":[],"payload":{"tag":"li","lines":"691,692"}},{"content":"<code>MultiThreadAllocTest()</code> - &#x591a;&#x7ebf;&#x7a0b;&#x5206;&#x914d;&#x6d4b;&#x8bd5;","children":[],"payload":{"tag":"li","lines":"692,693"}},{"content":"<code>BigAlloc()</code> - &#x5927;&#x5185;&#x5b58;&#x5206;&#x914d;&#x6d4b;&#x8bd5;","children":[],"payload":{"tag":"li","lines":"693,695"}}],"payload":{"tag":"h3","lines":"685,686"}}],"payload":{"tag":"h2","lines":"674,675"}},{"content":"&#x603b;&#x7ed3;","children":[{"content":"1. <strong>&#x9ad8;&#x6027;&#x80fd;</strong>&#xff1a;&#x7ebf;&#x7a0b;&#x79c1;&#x6709;&#x7f13;&#x5b58;&#x51cf;&#x5c11;&#x9501;&#x7ade;&#x4e89;&#xff0c;&#x6279;&#x91cf;&#x64cd;&#x4f5c;&#x51cf;&#x5c11;&#x7cfb;&#x7edf;&#x8c03;&#x7528;","children":[],"payload":{"tag":"li","lines":"699,700","listIndex":1}},{"content":"2. <strong>&#x4f4e;&#x788e;&#x7247;</strong>&#xff1a;&#x56fa;&#x5b9a;&#x5927;&#x5c0f;&#x5206;&#x914d;&#xff0c;Span &#x5408;&#x5e76;&#x51cf;&#x5c11;&#x5185;&#x5b58;&#x788e;&#x7247;","children":[],"payload":{"tag":"li","lines":"700,701","listIndex":2}},{"content":"3. <strong>&#x53ef;&#x6269;&#x5c55;</strong>&#xff1a;&#x652f;&#x6301;&#x4ece; 1 &#x5b57;&#x8282;&#x5230;&#x8d85;&#x5927;&#x5185;&#x5b58;&#x7684;&#x5206;&#x914d;","children":[],"payload":{"tag":"li","lines":"701,702","listIndex":3}},{"content":"4. <strong>&#x7ebf;&#x7a0b;&#x5b89;&#x5168;</strong>&#xff1a;&#x5b8c;&#x5584;&#x7684;&#x9501;&#x673a;&#x5236;&#x4fdd;&#x8bc1;&#x591a;&#x7ebf;&#x7a0b;&#x73af;&#x5883;&#x4e0b;&#x7684;&#x6b63;&#x786e;&#x6027;","children":[],"payload":{"tag":"li","lines":"702,704","listIndex":4}}],"payload":{"tag":"h2","lines":"695,696"}}],"payload":{"tag":"h1","lines":"0,1"}},null)</script>
</body>
</html>
